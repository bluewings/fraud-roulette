(this["webpackJsonpfraud-roulette"]=this["webpackJsonpfraud-roulette"]||[]).push([[0],{26:function(e,t,n){e.exports={root:"Intro_root__D-sNr"}},28:function(e,t,n){e.exports={root:"Picked_root__R2qM4",focus:"Picked_focus__16AXP"}},34:function(e,t,n){e.exports={root:"Main_root__OVCeA"}},37:function(e,t,n){e.exports={root:"Aim_root__1DOrK"}},38:function(e,t,n){e.exports={root:"Stage_root__jNgoC"}},39:function(e,t,n){e.exports={root:"About_root__3rHTE"}},40:function(e,t,n){},47:function(e,t,n){e.exports=n(62)},52:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(17),o=n.n(c),u=(n(52),n(24)),i=n(43),s=n(33),l=n(13),_=n(11),d=n(3),f=n(34),h=n.n(f),m=n(26),v=n.n(m);var b=function(e){var t=e.moveToStage,n=e.moveToStage_debug;return r.createElement(r.Fragment,null,r.createElement("div",{className:v.a.root},r.createElement("h1",{onClick:t},"Tab Roulette")),r.createElement("div",{className:v.a.root,style:{alignItems:"flex-end"}},r.createElement("h1",{onClick:n,style:{color:"rgba(255,255,255,0.1)"}},"Debug")))},g=n(19),p=n(68),O=n(35),x=n(64),E=n(67),y=function(){var e=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}(Object(l.a)(E.a)),t=0;return function(){return e[t++%e.length]}}();var j={pickedId:null,masterId:null,touches:[],_touches:{}},T=10,k=200,w=Object(p.a)("stage/TOUCH",(function(e,t){return{eventType:e,changedTouches:t}})),I=Object(p.a)("stage/PICK",(function(e){return{targetId:e}})),M=function(e,t){var n=t.type,r=t.payload;switch(n){case"stage/TOUCH":var a=(new Date).valueOf(),c=r.eventType,o=r.changedTouches;return Object.entries(e._touches).forEach((function(t){var n=Object(d.a)(t,2),r=n[0],c=n[1];c.end&&c.end+2e3<a&&delete e._touches[r]})),"touchstart"===c?o.forEach((function(t){var n=Object(d.a)(t,3),r=n[0],c=n[1],o=n[2];e._touches[r]={id:r,color:y(),x:c,y:o,start:a,_x:c,_y:o,_min_x:c,_max_x:c,_min_y:o,_max_y:o,_dist:0}})):"touchmove"===c?o.forEach((function(t){var n=Object(d.a)(t,3),r=n[0],a=n[1],c=n[2];e._touches[r]&&(e._touches[r].x=a,e._touches[r].y=c,e._touches[r]._min_x>a&&(e._touches[r]._min_x=a),e._touches[r]._max_x<a&&(e._touches[r]._max_x=a),e._touches[r]._min_y>c&&(e._touches[r]._min_y=c),e._touches[r]._max_y<c&&(e._touches[r]._max_y=c),e._touches[r]._dist=Math.sqrt(Math.pow(e._touches[r]._max_x-e._touches[r]._min_x,2)+Math.pow(e._touches[r]._max_y-e._touches[r]._min_y,2)))})):o.forEach((function(t){var n=Object(d.a)(t,3),r=n[0];n[1],n[2];e._touches[r]&&(e._touches[r].end=a)})),e.touches=Object.values(e._touches),void(e.touches.find((function(t){var n=t.id,r=t.end;return n===e.pickedId&&!r}))||(e.pickedId=null));case"stage/PICK":e.touches=Object.values(e._touches);var u=e.touches.filter((function(e){return!e.end}));return void(null===e.pickedId&&u.length>1&&(u.find((function(e){return e.id===r.targetId}))?e.pickedId=r.targetId:e.pickedId=Object(x.a)(u,[~~(Math.random()*u.length),"id"]),e.touches.forEach((function(t){t.id===e.pickedId?t.isPicked=!0:delete t.isPicked}))))}};var C=function(e){var t=Object(O.a)(M,e||j),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useMemo)((function(){return Object(x.a)(Object(l.a)(a.touches.filter((function(e){var t=e.end,n=e._dist;return!t&&T<n&&n<k}))).sort((function(e,t){return e._dist===t._dist?0:e._dist<t._dist?1:-1})),[0,"id"],null)}),[a.touches]);return[Object(g.a)({},a,{masterId:o}),c]};var N=function(e){var t=Object(r.useRef)();return t.current=e,Object(r.useCallback)((function(e){if("function"===typeof t.current){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.current.apply(t,[e].concat(r))}}),[])},S=n(27),P=n.n(S),A=n(66),R=n(28),D=n.n(R);var W=function(e){var t=Object(A.a)(),n=t.width,c=t.height,o=e.color,u=e.x,i=e.y,s=e.end,l=e.size,_=Object(r.useMemo)((function(){return Math.max(n,c)}),[n,c]),d=Object(r.useRef)();return Object(r.useEffect)((function(){d.current&&(d.current.style.strokeWidth=s?0:"".concat(2*_-(l+50),"px"))}),[_,s,l]),a.a.createElement("div",{className:D.a.root,style:{top:-c+i,left:-n+u}},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:2*n,height:2*c,viewBox:"0 0 ".concat(2*n," ").concat(2*c)},a.a.createElement("circle",{cx:n,cy:c,r:_,ref:d,className:D.a.focus,stroke:o,strokeWidth:0})))},z=n(9),K=n.n(z);var H=function(e){var t=e.id,n=e.x,c=e.y,o=e.color,u=e.end,i=e.pickedId,s=e.isPicked,l=e.master,_=e.size,f=e.debug,h=Object(r.useState)(!1),m=Object(d.a)(h,2),v=m[0],b=m[1];Object(r.useEffect)((function(){return b(!0)}),[]);var g=i&&i!==t||u;return a.a.createElement(a.a.Fragment,null,s&&a.a.createElement(W,Object.assign({},e,{size:_})),a.a.createElement("div",{className:P()(K.a.circle_wrap,v&&K.a.ready,g&&K.a.end,!g&&K.a.animate,s&&K.a.picked),style:{top:c-_/2,left:n-_/2}},a.a.createElement("div",{className:P()(K.a.circle,f&&l&&K.a.master)},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:_,height:_,viewBox:"0 0 140 140"},v&&a.a.createElement(a.a.Fragment,null,a.a.createElement("circle",{cx:"70",cy:"70",r:"52.5",stroke:o,className:K.a.arc}),a.a.createElement("circle",{cx:"70",cy:"70",r:"52.5",stroke:o,className:K.a.arc_bg})),a.a.createElement("circle",{className:K.a.inner,cx:"70",cy:"70",r:"35",fill:o})))))},L=n(37),X=n.n(L);var q=function(e){var t=e.touches,n=e.masterId,c=e.size,o=e.onTargetChange,u=e.debug,i=Object(A.a)(),s=i.width,l=i.height,_=Object(r.useMemo)((function(){return t.find((function(e){return e.id===n}))}),[t,n]),f=Object(r.useMemo)((function(){if(_){var e=Math.max(s,l),t={x:s/2,y:l/2},n={x:t.x+(_.x-_._x)*e,y:t.y+(_.y-_._y)*e};return function(e){var r=n.x-t.x,a=n.y-t.y,c=r*r+a*a,o=(e.x-t.x)*r+(e.y-t.y)*a,u=Math.min(1,Math.max(0,o/c));return o=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x),u>0?{_anchor:{x:t.x+r*u,y:t.y+a*u},_distance:~~Math.sqrt(~~Math.abs(o))}:{}}}return function(){}}),[s,l,_]),h=Object(r.useRef)(),m=Object(r.useMemo)((function(){var e=t.map((function(e){return Object(g.a)({},e,{},f({x:e.x,y:e.y}))})).filter((function(e){return e._anchor&&!e.end})).sort((function(e,t){return e._distance===t._distance?0:e._distance>t._distance?1:-1}));return[Object(x.a)(e,[0,"id"],null),e]}),[f,t]),v=Object(d.a)(m,2),b=v[0],p=v[1];return Object(r.useEffect)((function(){o(b)}),[o,b]),Object(r.useEffect)((function(){if(h.current){var e=h.current;e.width=s,e.height=l;var t=e.getContext("2d");if(t.clearRect(0,0,s,l),u&&_){var n=s/2,r=l/2,a=_.x-_._x,o=_.y-_._y,i=Math.max(s,l);t.moveTo(n,r),t.lineTo(n+a*i,r+o*i),t.lineWidth=4,t.strokeStyle="#fff",t.setLineDash([6,6]),t.stroke(),p.forEach((function(e,n){var r=e.x,a=e.y,o=e._anchor;e._distance;t.beginPath(),t.moveTo(r,a),t.lineTo(o.x,o.y),t.lineWidth=4,t.setLineDash([6,6]),t.strokeStyle=0===n?"red":"#fff",t.stroke(),0===n&&(t.beginPath(),t.arc(r,a,c/2+4,0,2*Math.PI),t.stroke())}))}}}),[u,s,l,_,p,c]),a.a.createElement("div",{className:X.a.root},a.a.createElement("canvas",{ref:h}))},B=n(38),F=n.n(B),J=150;var U,V=function(e){e.moveToIntro;var t=e.debug,n=C(),c=Object(d.a)(n,2),o=c[0],u=o.touches,i=o.pickedId,s=o.masterId,l=c[1],_=N((function(e){l(w(e.nativeEvent.type,Array.from(e.nativeEvent.changedTouches).map((function(e){return[e.identifier,e.pageX,e.pageY]}))))})),f=Object(r.useMemo)((function(){return u.filter((function(e){return!e.end})).map((function(e){return e.id})).join(",")}),[u]),h=Object(r.useState)(null),m=Object(d.a)(h,2),v=m[0],b=m[1],g=N(b),p=N((function(){return l(I(v))}));Object(r.useEffect)((function(){var e=setTimeout(p,2500);return function(){return clearTimeout(e)}}),[f,p]);var O=Object(r.useRef)();return Object(r.useEffect)((function(){if(O.current){var e=function(e){return e.preventDefault()};O.current.addEventListener("touchstart",e),O.current.addEventListener("touchmove",e)}}),[]),a.a.createElement("div",{ref:O},a.a.createElement("div",{className:F.a.root,onTouchStart:_,onTouchMove:_,onTouchEnd:_,onTouchCancel:_},u.map((function(e){return a.a.createElement(H,Object.assign({key:e.id},e,{pickedId:i,master:s===e.id,size:J,debug:t}))})),a.a.createElement(q,{touches:u,masterId:s,size:J,onTargetChange:g,debug:t})))};!function(e){e.intro="intro",e.stage="stage",e.stage_debug="stage_debug"}(U||(U={}));var Y=function(){var e=Object(r.useState)(U.intro),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(r.useMemo)((function(){switch(window.scrollTo(0,0),n){case U.intro:return b;case U.stage:return V;case U.stage_debug:return function(){return a.a.createElement(V,{debug:!0})};default:return function(){return null}}}),[n]),u=Object(r.useMemo)((function(){return{moveToIntro:function(){return c(U.intro)},moveToStage:function(){return c(U.stage)},moveToStage_debug:function(){return c(U.stage_debug)}}}),[c]);return a.a.createElement("div",{className:h.a.root},a.a.createElement(o,u))},Q=n(39),$=n.n(Q),G=function(e){return a.a.createElement("div",{className:$.a.root},a.a.createElement("h1",null,"About"))},Z=n(40),ee=n.n(Z),te=function(e){return a.a.createElement("div",{className:ee.a.root},e.children)},ne=[{name:"Main",path:"/",Component:Y},{name:"About",path:"/about",Component:G}],re=function(){var e=[].concat(Object(l.a)(ne.map((function(e,t){var n=e.exact,a=e.path,c=e.Component;return r.createElement(_.b,{key:"route-".concat(t),exact:!!n,path:a,render:function(e){return r.createElement(c,e)}})}))),[r.createElement(_.a,{key:"redirect-to-default",to:"/"})]);return function(){return r.createElement(te,null,r.createElement(_.d,null,e))}}(),ae=n(6),ce=n(21),oe=n(42),ue=n.n(oe),ie=n(20),se=n(65),le=n(16),_e=(Object(p.a)("app/INCREASE",(function(){return null})),Object(se.a)(Object(ie.a)({},"app/INCREASE",(function(e,t){t.payload;return Object(le.a)(e,(function(e){e.count++}))})),{count:0})),de=Object(ae.b)({app:Object(ce.a)({key:"app",storage:ue.a},_e)}),fe=function(e){var t;try{t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ae.c}catch(a){t=ae.c}var n=t(),r=Object(ae.d)(de,e,n);return{store:r,persistor:Object(ce.b)(r)}}(),he=fe.store,me=fe.persistor,ve=function(){return a.a.createElement(i.a,{store:he},a.a.createElement(s.a,{persistor:me,loading:null},a.a.createElement(u.a,null,a.a.createElement(re,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports={circle_wrap:"Touch_circle_wrap__bYmci",ready:"Touch_ready__3T9o7",end:"Touch_end__3Kqx2",picked:"Touch_picked__2aXKt",animate:"Touch_animate__1dHWO",breath:"Touch_breath__3zong",circle:"Touch_circle__27J8m",outer:"Touch_outer__2Af_C",master:"Touch_master__IS2-1",inner:"Touch_inner__2kcO-",arc:"Touch_arc__2d-we",arc_bg:"Touch_arc_bg__2KWQH"}}},[[47,1,2]]]);
//# sourceMappingURL=main.2fba9a2e.chunk.js.map